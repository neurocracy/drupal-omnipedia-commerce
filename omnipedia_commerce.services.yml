services:

  # Our logger channel.
  logger.channel.omnipedia_commerce:
    class: Drupal\Core\Logger\LoggerChannel
    factory: logger.factory:get
    arguments: ['omnipedia_commerce']

  # Event subscriber to grant a user episode tiers on Commerce order paid.
  omnipedia_commerce.commerce_episode_tier_permission_event_subscriber:
    class: Drupal\omnipedia_commerce\EventSubscriber\Commerce\EpisodeTierPermissionEventSubscriber
    arguments:
      - '@config.factory'
      - '@logger.channel.omnipedia_commerce'
      - '@permissions_by_term.access_storage'
      - '@permissions_by_term.node_access'
    tags:
      - { name: 'event_subscriber' }

  # Event subscriber to remove the Commerce added to cart message.
  omnipedia_commerce.kernel_commerce_cart_added_message_removal_event_subscriber:
    class: Drupal\omnipedia_commerce\EventSubscriber\Kernel\CommerceCartAddedMessageRemovalEventSubscriber
    arguments:
      - '@commerce_cart.cart_subscriber'
    tags:
      - { name: 'event_subscriber' }

  # Event subscriber to alter Commerce checkout flow PayPal buttons location.
  omnipedia_commerce.base_form_commerce_checkout_flow_paypal_alter_event_subscriber:
    class: Drupal\omnipedia_commerce\EventSubscriber\Form\CommerceCheckoutFlowPayPalBaseFormAlterEventSubscriber
    tags:
      - { name: 'event_subscriber' }

  # Event subscriber to alter Commerce payment options, adding Stripe links.
  omnipedia_commerce.base_form_commerce_checkout_flow_stripe_alter_event_subscriber:
    class: Drupal\omnipedia_commerce\EventSubscriber\Form\CommerceCheckoutFlowStripeBaseFormAlterEventSubscriber
    arguments:
      - '@string_translation'
    tags:
      - { name: 'event_subscriber' }
