services:

  # Our logger channel.
  logger.channel.omnipedia_commerce:
    class: Drupal\Core\Logger\LoggerChannel
    factory: logger.factory:get
    arguments: ['omnipedia_commerce']

  # Event subscriber to grant a user episode tiers on Commerce order paid.
  omnipedia_commerce.commerce_episode_tier_permission_event_subscriber:
    class: Drupal\omnipedia_commerce\EventSubscriber\Commerce\EpisodeTierPermissionEventSubscriber
    arguments:
      - '@config.factory'
      - '@logger.channel.omnipedia_commerce'
      - '@permissions_by_term.access_storage'
      - '@permissions_by_term.node_access'
    tags:
      - { name: 'event_subscriber' }
